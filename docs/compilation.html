<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="light-mode">
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <meta name="generator" content="Doxygen 1.9.8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ampsci:
            Compilation Details</title>
        <link href="tabs.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./MathJax.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="blue-theme.css" rel="stylesheet" type="text/css"/>
        <!-- ... other metadata & script includes ... -->
        <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeFragmentCopyButton.init()
        </script>
        <!-- <script>
            document.documentElement.classList.add("light-mode");
        </script> -->
    </head>
    <body>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div id="titlearea">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr style="height: 56px;">
                            <td id="projectalign" style="padding-left: 0.5em;">
                                <div id="projectname">ampsci
                                </div>
                                <div
                                    id="projectbrief">High-precision calculations for one- and two-valence atomic systems</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('compilation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Compilation Details</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Detailed compilation instructions for Linux, Mac, and Windows.</p>
<h2>Dependencies / Requirements</h2>
<ul>
<li>C++ compiler that supports C++17<ul>
<li>Tested with clang version 6 and newer; gcc version 7 and newer</li>
<li>Tested with g++ and clang++ on linux and mac</li>
<li>Also tested with Intel [icc 2021.9.0], though this is tested infrequently</li>
</ul>
</li>
<li>LAPACK and BLAS libraries <a href="http://www.netlib.org/lapack/">netlib.org/lapack/</a></li>
<li>GSL (GNU scientific libraries) <a href="https://www.gnu.org/software/gsl/">gnu.org/software/gsl/</a> [version 2.0 or newer*]<ul>
<li>(it <em>should</em> also work with older versions of GSL, but this is not regularly tested and therefore not guaranteed)</li>
<li>Updated to work with newer GSL version 2.8; still works with older versions too</li>
</ul>
</li>
<li>[optional] GNU Make (<a href="https://www.gnu.org/software/make/">gnu.org/software/make/</a>) - used to compile code</li>
<li>[optional] OpenMP (<a href="https://www.openmp.org/">openmp.org/</a>) - used for parallelisation</li>
<li>[optional] git (<a href="https://git-scm.com/">git-scm.com/</a>) for version tracking and to keep up-to-date with latest version</li>
<li>The shell script <code>install-dependencies.sh</code> will attempt to automatically install the required dependencies</li>
</ul>
<hr  />
<h2>Compilation: Linux</h2>
<ul>
<li>Instructions for ubuntu; similar commands for other flavours</li>
<li>Install make: <code>sudo apt-get install make</code></li>
<li>Install GSL libraries: <code>sudo apt-get install libgsl-dev</code></li>
<li>May also need LAPACK/BLAS libraries: <code>sudo apt-get install libatlas-base-dev liblapack-dev libblas-dev</code></li>
<li>Install the compiler: <code>sudo apt-get install g++</code> and/or <code>sudo apt-get install clang++</code></li>
<li>Then compile by running <code>make</code> from the ampsci directory</li>
<li>To use with openMP (for parallelisation) with clang++, you might have to also install clang openmp libraries: <code>sudo apt install libomp-dev</code><ul>
<li>You'll often need the exact versions to match. So, if using <code>clang++-15</code>, install <code>libomp-dev-15</code>.</li>
</ul>
</li>
</ul>
<h2>Compilation: MacOS (intel chip)</h2>
<ul>
<li>On mac: use <em>homebrew</em> to install gsl: <em>brew install gsl</em></li>
<li><em>homebrew</em> is a package manager; install from <a href="https://brew.sh/">https://brew.sh/</a></li>
<li>Seems to work best with the homebrew version of gcc. Install as: <code>brew install gcc</code></li>
<li>Note: you may need to change the compiler from <code>g++</code> to <code>g++-9</code> (or similar), or update your environment variables, since calling g++ on mac actually calls clang++ by default</li>
<li>You might have to tell the compiler how to link to the GSL library; in Makefile:<ul>
<li><code>GSL_PATH=/usr/local/opt/gnu-scientific-library</code></li>
</ul>
</li>
<li>Then compile by running <em>make</em> from the ampsci directory</li>
<li>Use openMP for parellelisation when using clang++ on mac:<ul>
<li>If using g++, should work as per normal</li>
<li>To use openMP with clang, seem to require the llvm version</li>
<li><em>brew install llvm</em></li>
<li>Then, in the Makefile, set (exact paths may be different for you):<ul>
<li><code>CXX = /usr/local/opt/llvm/bin/clang++</code></li>
<li><code>CARGS += -I/usr/local/opt/llvm/include/</code></li>
<li><code>LARGS += -l/usr/local/opt/llvm/lib/</code></li>
</ul>
</li>
<li>This seems fragile</li>
</ul>
</li>
</ul>
<h2>Compilation: MacOS (M1/M2/apple silicon chip)</h2>
<ul>
<li>Mostly the same as above, but some of the libraries are installed to different directories by default. In particular:</li>
<li><code>GSL_PATH=/opt/homebrew/Cellar/gsl/2.7</code></li>
</ul>
<h2>Compilation: Windows</h2>
<ul>
<li>For windows, the easiest way (for me, anyway) is to use the 'windows subsystem for linux' (requires Windows 10+).</li>
<li>Instructions on installation/use here: <a href="https://docs.microsoft.com/en-us/windows/wsl/install">docs.microsoft.com/en-us/windows/wsl/install</a>.</li>
<li>Then, the compilation + use can proceed as per Linux above.</li>
<li>You may have some luck getting the MSVC compiler working, but linking to libraries will be difficult</li>
</ul>
<hr  />
<h2>Compilation Options</h2>
<p>Various basic options can be specified in the <code>Makefile</code>:</p>
<ul>
<li>Set the compiler you want to use:</li>
</ul>
<div class="fragment"><div class="line">## Which compiler: (g++, clang++)</div>
<div class="line">CXX = g++</div>
</div><!-- fragment --><ul>
<li>Build modes:<ul>
<li>Choose one of <code>release/dev/debug</code></li>
<li><code>release</code> (default) &ndash; turns off warnings and checks. This is fine for main branch if you haven't modified anything, but should not be used if you are modiying the code</li>
<li><code>dev</code> &ndash; please use <code>dev</code> mode, which turns on checks and warning, if you are modyfying the code. This will help to catch any errors or issues</li>
<li><code>debug</code> &ndash; will be slow, but turns on some debugging options to make debugging easier</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line">## Build mode (changes warnings + optimisation level): release/dev/debug</div>
<div class="line">MODE ?= release</div>
</div><!-- fragment --><ul>
<li>Path to the GSL libraries. This can be left blank the majority of the time. On some systems if GSL is not found natively, or if the incorrect labrary is being found, you might need to specify it<ul>
<li>e.g., on newer M1/M2 macs, you may need <code>/opt/homebrew/Cellar/gsl/2.7.1/</code></li>
<li>intel mac: <code>/usr/local/opt/gnu-scientific-library</code></li>
<li>the <code>configure.sh</code> script should have done this for you</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line">## Path to the GSL library. Usually, this can be left blank. </div>
<div class="line">## Exact path will depend on where GSL has been installed. </div>
<div class="line">GSL_PATH ?=</div>
</div><!-- fragment --><ul>
<li>Libraries. Again, usually the default is fine.<ul>
<li>On some systems, different libraries are used (e.g., openblas vs. blas)</li>
<li>In particular, on Firday cluster: <code>-lgsl -lgslcblas -lopenblas</code></li>
<li>On Bunya: <code>-lgsl -lgslcblas -llapack -lopenblas -lgfortran</code></li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line">## Set GSL and LAPACK/BLAS library flags. These are typical, but sometimes differ</div>
<div class="line">LDLIBS ?= -lgsl -lgslcblas -llapack -lblas</div>
</div><!-- fragment --><ul>
<li>OpenMP library</li>
<li>Comment out or leave option blank to turn off OpenMP multithreading</li>
</ul>
<div class="fragment"><div class="line">## OpenMP library to use. Comment out or leave blank for no OpenMP</div>
<div class="line">OMPLIB ?= -fopenmp</div>
</div><!-- fragment --><ul>
<li>Extra compiler/linker arguments: usually blank, but you may add to these, which are passed as compiler and linker arguments</li>
</ul>
<div class="fragment"><div class="line"># Use these to pass in any other compiler/linker arguments (Rarely needed)</div>
<div class="line">CARGS ?=</div>
<div class="line">LARGS ?=</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="getting_started.html">Getting started</a></li>
    <li class="footer">Generated on Mon Mar 2 2026 04:48:12 for ampsci by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
