<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="light-mode">
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=9" />
        <meta name="generator" content="Doxygen 1.9.8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ampsci:
            Basic troubleshooting</title>
        <link href="tabs.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./MathJax.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="blue-theme.css" rel="stylesheet" type="text/css"/>
        <!-- ... other metadata & script includes ... -->
        <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeFragmentCopyButton.init()
        </script>
        <!-- <script>
            document.documentElement.classList.add("light-mode");
        </script> -->
    </head>
    <body>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div id="titlearea">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr style="height: 56px;">
                            <td id="projectalign" style="padding-left: 0.5em;">
                                <div id="projectname">ampsci
                                </div>
                                <div
                                    id="projectbrief">High-precision calculations for one- and two-valence atomic systems</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('troubleshooting.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Basic troubleshooting</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Basic troubleshooting and common errors.</p>
<p>A small collection of common errors users have seen, and how to beat them. If you run into more exotic errors, let me know and I'll add them here.</p>
<h3>Makefile errors</h3>
<p>If running 'make' doesn't compile the code, or you get a "nothing to be done" or an error like:</p>
<ul>
<li><code>make: *** No rule to make target '/main.o', needed by 'ampsci'. Stop.</code></li>
</ul>
<p>you might be using an out-of-date Makefile. Either re-run <code>configure.sh</code> or manually re-copy the updated makefile:</p>
<div class="shell-block"> <div class="fragment"><div class="line">./configure.sh</div>
</div><!-- fragment --> </div><p> or </p><div class="shell-block"> <div class="fragment"><div class="line">cp ./doc/Makefile .</div>
<div class="line">make</div>
</div><!-- fragment --> </div><p>and try again.</p>
<h3>libgfortran error</h3>
<p>Error linking to gfortran/lapack, may be something like this:</p>
<div class="fragment"><div class="line">ld: .../liblapack.a(xerbla.o): undefined reference to symbol &#39;_gfortran_string_len_trim@@GFORTRAN_8&#39;</div>
<div class="line">ld: .../libgfortran.so.5: error adding symbols: DSO missing from command line</div>
<div class="line">make: *** [build/buildTargets.mk:66: ampsci] Error 1</div>
</div><!-- fragment --><p>Sometimes occurs on certain systems (e.g., bunya). In these cases, the fortran libraries need to be linked to explicitely. This can be done by adding <code>-lgfortran</code> to the <code>LDLIBS</code> option in the Makefile</p>
<div class="fragment"><div class="line">LDLIBS += -lgfortran</div>
</div><!-- fragment --><h3>OpenMP errors</h3>
<ul>
<li><b>error: unsupported option -fopenmp</b></li>
<li><b>error: could not find &lt;omp.h&gt;</b></li>
<li>openmp (used for parallelisation) is not working. See <a class="el" href="compilation.html">Compilation Details</a> for some possible solutions.</li>
<li>Quick fix: change '<em>OMPLIB=-fopenmp</em>' to '<em>OMPLIB=</em>' in Makefile, which turns off OpenMP</li>
</ul>
<h3>GSL Errors</h3>
<ul>
<li><b>fatal error: gsl/&lt;...&gt;.h: No such file or directory</b> (or similar)</li>
<li><b>gsl</b> related linking/compilation error:</li>
<li>Could not find required GSL libraries. Either they are not installed, or you need to link to them</li>
<li>1) Ensure GSL is installed (see above for instructions)</li>
<li>1) If GSL library is not installed in _/usr/local/_, you have to tell the compiler where to find the GSL files. Do this by setting the <em>GSL_PATH</em> option in Makefile. Common examples:<ul>
<li><em>GSL_PATH=/opt/gsl/2.1/gnu</em> # For UQ's getafix cluster</li>
<li><em>GSL_PATH=/usr/local/opt/gnu-scientific-library</em> # For my macbook</li>
<li>Note: the exact path may differ for you, depending on where GSL was installed</li>
</ul>
</li>
<li><b>error: too few arguments to function â€˜int gsl_bspline_deriv_eval</b></li>
<li>This is because the code is linking to a <em>very</em> old version of GSL. You might need to update GSL. If you have updated GSL (to at least version 2.0) and still get the message, the code is probably linking against the wrong version of GSL; see above to point the compiler to the correct version</li>
<li>On HPC cluster, this might be because you haven't loaded the gsl module <code>module load gsl</code> (<em>after</em> loading the gcc compiler)</li>
</ul>
<h3>ld: Assertion failed: (resultIndex &lt; sectData.atoms.size())</h3>
<p>Full error message may look something like:</p>
<div class="fragment"><div class="line">0  0x102497648  __assert_rtn + 72</div>
<div class="line">1  0x1023cbfac  ld::AtomPlacement::findAtom(unsigned char, unsigned long long, ld::AtomPlacement::AtomLoc const*&amp;, long long&amp;) const + 1204</div>
<div class="line">2  0x1023e1924  ld::InputFiles::SliceParser::parseObjectFile(mach_o::Header const*) const + 15164</div>
<div class="line">3  0x1023eee30  ld::InputFiles::parseAllFiles(void (ld::AtomFile const*) block_pointer)::$_7::operator()(unsigned long, ld::FileInfo const&amp;) const + 420</div>
<div class="line">4  0x185a37950  _dispatch_client_callout2 + 20</div>
<div class="line">5  0x185a4aba0  _dispatch_apply_invoke + 176</div>
<div class="line">6  0x185a37910  _dispatch_client_callout + 20</div>
<div class="line">7  0x185a493cc  _dispatch_root_queue_drain + 864</div>
<div class="line">8  0x185a49a04  _dispatch_worker_thread2 + 156</div>
<div class="line">9  0x185be10d8  _pthread_wqthread + 228</div>
<div class="line">ld: Assertion failed: (resultIndex &lt; sectData.atoms.size()), function findAtom, file Relocations.cpp, line 1336.</div>
<div class="line">collect2: error: ld returned 1 exit status</div>
</div><!-- fragment --><ul>
<li>This seems to be a bug with M1/M2 mac linker implementation with CommandLineTools version 15.0 (see <a href="https://developer.apple.com/forums/thread/737707">developer.apple.com/forums/thread/737707</a>)</li>
<li>See also: <a href="https://github.com/Homebrew/homebrew-core/issues/145991">github.com/Homebrew/homebrew-core/issues/145991</a></li>
<li>This issue seems to have been resolved in version 15.1 - so run an update if you can.</li>
<li>If you can't update, it seems this can be fixed by adding the following to the Makefile:</li>
</ul>
<div class="fragment"><div class="line">LARGS=-Wl,-ld_classic</div>
</div><!-- fragment --><p>You shouldn't need to make clean first, but if it doesn't work, try that too.</p>
<h3>Others</h3>
<ul>
<li>Sometimes, the compiler will not be able to find the correct libraries (particular, e.g., on clusters). In this case, there are two options in the Makfefile: <b>CARGS ?=</b> and <b>LARGS ?=</b> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="getting_started.html">Getting started</a></li>
    <li class="footer">Generated on Mon Mar 2 2026 04:48:12 for ampsci by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
